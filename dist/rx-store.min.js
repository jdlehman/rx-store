!function(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports["rx-store"]=r():t["rx-store"]=r()}(this,function(){return function(t){function r(n){if(e[n])return e[n].exports;var i=e[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}var e={};return r.m=t,r.c=e,r.p="",r(0)}([function(t,r,e){"use strict";function n(t,r){var e=new i.Subject,n=e.startWith(r).scan(t);return{action$:e,state$:n,dispatch:function(t){return e.next(t)},subscribe:function(){return n.subscribe.apply(n,arguments)}}}Object.defineProperty(r,"__esModule",{value:!0}),r.createRxStore=n;var i=e(17);e(20),e(19)},function(t,r,e){"use strict";var n=e(3),i=e(32),s=e(7),o=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(r){var e=new t;return e.source=this,e.operator=r,e},t.prototype.subscribe=function(t,r,e){var n=this.operator,s=i.toSubscriber(t,r,e);if(n?n.call(s,this):s.add(this._subscribe(s)),s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s},t.prototype.forEach=function(t,r){var e=this;if(r||(n.root.Rx&&n.root.Rx.config&&n.root.Rx.config.Promise?r=n.root.Rx.config.Promise:n.root.Promise&&(r=n.root.Promise)),!r)throw new Error("no Promise impl found");return new r(function(r,n){var i=e.subscribe(function(r){if(i)try{t(r)}catch(e){n(e),i.unsubscribe()}else t(r)},n,r)})},t.prototype._subscribe=function(t){return this.source.subscribe(t)},t.prototype[s]=function(){return this},t.create=function(r){return new t(r)},t}();r.Observable=o},function(t,r,e){"use strict";var n=this&&this.__extends||function(t,r){function e(){this.constructor=t}for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n]);t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)},i=e(13),s=e(4),o=e(15),c=e(5),u=function(t){function r(e,n,i){switch(t.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=o.empty;break;case 1:if(!e){this.destination=o.empty;break}if("object"==typeof e){e instanceof r?(this.destination=e,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new h(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new h(this,e,n,i)}}return n(r,t),r.prototype[c.$$rxSubscriber]=function(){return this},r.create=function(t,e,n){var i=new r(t,e,n);return i.syncErrorThrowable=!1,i},r.prototype.next=function(t){this.isStopped||this._next(t)},r.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},r.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},r.prototype.unsubscribe=function(){this.isUnsubscribed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},r.prototype._next=function(t){this.destination.next(t)},r.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},r.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},r}(s.Subscription);r.Subscriber=u;var h=function(t){function r(r,e,n,s){t.call(this),this._parent=r;var o,c=this;i.isFunction(e)?o=e:e&&(c=e,o=e.next,n=e.error,s=e.complete,i.isFunction(c.unsubscribe)&&this.add(c.unsubscribe.bind(c)),c.unsubscribe=this.unsubscribe.bind(this)),this._context=c,this._next=o,this._error=n,this._complete=s}return n(r,t),r.prototype.next=function(t){if(!this.isStopped&&this._next){var r=this._parent;r.syncErrorThrowable?this.__tryOrSetError(r,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},r.prototype.error=function(t){if(!this.isStopped){var r=this._parent;if(this._error)r.syncErrorThrowable?(this.__tryOrSetError(r,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else{if(!r.syncErrorThrowable)throw this.unsubscribe(),t;r.syncErrorValue=t,r.syncErrorThrown=!0,this.unsubscribe()}}},r.prototype.complete=function(){if(!this.isStopped){var t=this._parent;this._complete?t.syncErrorThrowable?(this.__tryOrSetError(t,this._complete),this.unsubscribe()):(this.__tryOrUnsub(this._complete),this.unsubscribe()):this.unsubscribe()}},r.prototype.__tryOrUnsub=function(t,r){try{t.call(this._context,r)}catch(e){throw this.unsubscribe(),e}},r.prototype.__tryOrSetError=function(t,r,e){try{r.call(this._context,e)}catch(n){return t.syncErrorValue=n,t.syncErrorThrown=!0,!0}return!1},r.prototype._unsubscribe=function(){var t=this._parent;this._context=null,this._parent=null,t.unsubscribe()},r}(u)},function(t,r,e){(function(t,e){"use strict";var n={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1};r.root=n[typeof self]&&self||n[typeof window]&&window;var i=(n[typeof r]&&r&&!r.nodeType&&r,n[typeof t]&&t&&!t.nodeType&&t,n[typeof e]&&e);!i||i.global!==i&&i.window!==i||(r.root=i)}).call(r,e(34)(t),function(){return this}())},function(t,r,e){"use strict";var n=e(12),i=e(29),s=e(13),o=e(33),c=e(11),u=e(28),h=function(){function t(t){this.isUnsubscribed=!1,t&&(this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var t,r=!1;if(!this.isUnsubscribed){this.isUnsubscribed=!0;var e=this,h=e._unsubscribe,a=e._subscriptions;if(this._subscriptions=null,s.isFunction(h)){var b=o.tryCatch(h).call(this);b===c.errorObject&&(r=!0,(t=t||[]).push(c.errorObject.e))}if(n.isArray(a))for(var p=-1,f=a.length;++p<f;){var l=a[p];if(i.isObject(l)){var b=o.tryCatch(l.unsubscribe).call(l);if(b===c.errorObject){r=!0,t=t||[];var y=c.errorObject.e;y instanceof u.UnsubscriptionError?t=t.concat(y.errors):t.push(y)}}}if(r)throw new u.UnsubscriptionError(t)}},t.prototype.add=function(r){if(r&&r!==this&&r!==t.EMPTY){var e=r;switch(typeof r){case"function":e=new t(r);case"object":if(e.isUnsubscribed||"function"!=typeof e.unsubscribe)break;this.isUnsubscribed?e.unsubscribe():(this._subscriptions||(this._subscriptions=[])).push(e);break;default:throw new Error("Unrecognized teardown "+r+" added to Subscription.")}return e}},t.prototype.remove=function(r){if(null!=r&&r!==this&&r!==t.EMPTY){var e=this._subscriptions;if(e){var n=e.indexOf(r);n!==-1&&e.splice(n,1)}}},t.EMPTY=function(t){return t.isUnsubscribed=!0,t}(new t),t}();r.Subscription=h},function(t,r,e){"use strict";var n=e(3),i=n.root.Symbol;r.$$rxSubscriber="function"==typeof i&&"function"==typeof i["for"]?i["for"]("rxSubscriber"):"@@rxSubscriber"},function(t,r){"use strict";function e(t){return t&&"function"==typeof t.schedule}r.isScheduler=e},function(t,r,e){(function(r){"use strict";t.exports=e(21)(r||window||this)}).call(r,function(){return this}())},function(t,r,e){"use strict";var n=this&&this.__extends||function(t,r){function e(){this.constructor=t}for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n]);t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)},i=e(1),s=e(10),o=e(9),c=e(6),u=function(t){function r(r,e){t.call(this),this.array=r,this.scheduler=e,e||1!==r.length||(this._isScalar=!0,this.value=r[0])}return n(r,t),r.create=function(t,e){return new r(t,e)},r.of=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=t[t.length-1];c.isScheduler(n)?t.pop():n=null;var i=t.length;return i>1?new r(t,n):1===i?new s.ScalarObservable(t[0],n):new o.EmptyObservable(n)},r.dispatch=function(t){var r=t.array,e=t.index,n=t.count,i=t.subscriber;return e>=n?void i.complete():(i.next(r[e]),void(i.isUnsubscribed||(t.index=e+1,this.schedule(t))))},r.prototype._subscribe=function(t){var e=0,n=this.array,i=n.length,s=this.scheduler;if(s)return s.schedule(r.dispatch,0,{array:n,index:e,count:i,subscriber:t});for(var o=0;o<i&&!t.isUnsubscribed;o++)t.next(n[o]);t.complete()},r}(i.Observable);r.ArrayObservable=u},function(t,r,e){"use strict";var n=this&&this.__extends||function(t,r){function e(){this.constructor=t}for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n]);t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)},i=e(1),s=function(t){function r(r){t.call(this),this.scheduler=r}return n(r,t),r.create=function(t){return new r(t)},r.dispatch=function(t){var r=t.subscriber;r.complete()},r.prototype._subscribe=function(t){var e=this.scheduler;return e?e.schedule(r.dispatch,0,{subscriber:t}):void t.complete()},r}(i.Observable);r.EmptyObservable=s},function(t,r,e){"use strict";var n=this&&this.__extends||function(t,r){function e(){this.constructor=t}for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n]);t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)},i=e(1),s=function(t){function r(r,e){t.call(this),this.value=r,this.scheduler=e,this._isScalar=!0,e&&(this._isScalar=!1)}return n(r,t),r.create=function(t,e){return new r(t,e)},r.dispatch=function(t){var r=t.done,e=t.value,n=t.subscriber;return r?void n.complete():(n.next(e),void(n.isUnsubscribed||(t.done=!0,this.schedule(t))))},r.prototype._subscribe=function(t){var e=this.value,n=this.scheduler;return n?n.schedule(r.dispatch,0,{done:!1,value:e,subscriber:t}):(t.next(e),void(t.isUnsubscribed||t.complete()))},r}(i.Observable);r.ScalarObservable=s},function(t,r){"use strict";r.errorObject={e:{}}},function(t,r){"use strict";r.isArray=Array.isArray||function(t){return t&&"number"==typeof t.length}},function(t,r){"use strict";function e(t){return"function"==typeof t}r.isFunction=e},function(t,r,e){"use strict";var n=this&&this.__extends||function(t,r){function e(){this.constructor=t}for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n]);t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)},i=e(2),s=function(t){function r(r,e,n){t.call(this),this.parent=r,this.outerValue=e,this.outerIndex=n,this.index=0}return n(r,t),r.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},r.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},r.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},r}(i.Subscriber);r.InnerSubscriber=s},function(t,r){"use strict";r.empty={isUnsubscribed:!0,next:function(t){},error:function(t){throw t},complete:function(){}}},function(t,r,e){"use strict";var n=this&&this.__extends||function(t,r){function e(){this.constructor=t}for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n]);t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)},i=e(2),s=function(t){function r(){t.apply(this,arguments)}return n(r,t),r.prototype.notifyNext=function(t,r,e,n,i){this.destination.next(r)},r.prototype.notifyError=function(t,r){this.destination.error(t)},r.prototype.notifyComplete=function(t){this.destination.complete()},r}(i.Subscriber);r.OuterSubscriber=s},function(t,r,e){"use strict";var n=this&&this.__extends||function(t,r){function e(){this.constructor=t}for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n]);t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)},i=e(1),s=e(2),o=e(4),c=e(27),u=e(18),h=e(5),a=function(t){function r(r){t.call(this,r),this.destination=r}return n(r,t),r}(s.Subscriber);r.SubjectSubscriber=a;var b=function(t){function r(){t.call(this),this.observers=[],this.isUnsubscribed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return n(r,t),r.prototype[h.$$rxSubscriber]=function(){return new a(this)},r.prototype.lift=function(t){var r=new p(this,this);return r.operator=t,r},r.prototype.next=function(t){if(this.isUnsubscribed)throw new c.ObjectUnsubscribedError;if(!this.isStopped)for(var r=this.observers,e=r.length,n=r.slice(),i=0;i<e;i++)n[i].next(t)},r.prototype.error=function(t){if(this.isUnsubscribed)throw new c.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var r=this.observers,e=r.length,n=r.slice(),i=0;i<e;i++)n[i].error(t);this.observers.length=0},r.prototype.complete=function(){if(this.isUnsubscribed)throw new c.ObjectUnsubscribedError;this.isStopped=!0;for(var t=this.observers,r=t.length,e=t.slice(),n=0;n<r;n++)e[n].complete();this.observers.length=0},r.prototype.unsubscribe=function(){this.isStopped=!0,this.isUnsubscribed=!0,this.observers=null},r.prototype._subscribe=function(t){if(this.isUnsubscribed)throw new c.ObjectUnsubscribedError;return this.hasError?(t.error(this.thrownError),o.Subscription.EMPTY):this.isStopped?(t.complete(),o.Subscription.EMPTY):(this.observers.push(t),new u.SubjectSubscription(this,t))},r.prototype.asObservable=function(){var t=new i.Observable;return t.source=this,t},r.create=function(t,r){return new p(t,r)},r}(i.Observable);r.Subject=b;var p=function(t){function r(r,e){t.call(this),this.destination=r,this.source=e}return n(r,t),r.prototype.next=function(t){var r=this.destination;r&&r.next&&r.next(t)},r.prototype.error=function(t){var r=this.destination;r&&r.error&&this.destination.error(t)},r.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},r.prototype._subscribe=function(t){var r=this.source;return r?this.source.subscribe(t):o.Subscription.EMPTY},r}(b);r.AnonymousSubject=p},function(t,r,e){"use strict";var n=this&&this.__extends||function(t,r){function e(){this.constructor=t}for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n]);t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)},i=e(4),s=function(t){function r(r,e){t.call(this),this.subject=r,this.subscriber=e,this.isUnsubscribed=!1}return n(r,t),r.prototype.unsubscribe=function(){if(!this.isUnsubscribed){this.isUnsubscribed=!0;var t=this.subject,r=t.observers;if(this.subject=null,r&&0!==r.length&&!t.isStopped&&!t.isUnsubscribed){var e=r.indexOf(this.subscriber);e!==-1&&r.splice(e,1)}}},r}(i.Subscription);r.SubjectSubscription=s},function(t,r,e){"use strict";var n=e(1),i=e(24);n.Observable.prototype.scan=i.scan},function(t,r,e){"use strict";var n=e(1),i=e(25);n.Observable.prototype.startWith=i.startWith},function(t,r){"use strict";t.exports=function(t){var r,e=t.Symbol;return"function"==typeof e?e.observable?r=e.observable:(r=e("observable"),e.observable=r):r="@@observable",r}},function(t,r,e){"use strict";function n(){for(var t=[],r=0;r<arguments.length;r++)t[r-0]=arguments[r];return i.apply(void 0,[this].concat(t))}function i(){for(var t=[],r=0;r<arguments.length;r++)t[r-0]=arguments[r];var e=null,n=t;return s.isScheduler(n[t.length-1])&&(e=n.pop()),new o.ArrayObservable(t,e).lift(new c.MergeAllOperator(1))}var s=e(6),o=e(8),c=e(23);r.concat=n,r.concatStatic=i},function(t,r,e){"use strict";function n(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),this.lift(new c(t))}var i=this&&this.__extends||function(t,r){function e(){this.constructor=t}for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n]);t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)},s=e(16),o=e(31);r.mergeAll=n;var c=function(){function t(t){this.concurrent=t}return t.prototype.call=function(t,r){return r._subscribe(new u(t,this.concurrent))},t}();r.MergeAllOperator=c;var u=function(t){function r(r,e){t.call(this,r),this.concurrent=e,this.hasCompleted=!1,this.buffer=[],this.active=0}return i(r,t),r.prototype._next=function(t){this.active<this.concurrent?(this.active++,this.add(o.subscribeToResult(this,t))):this.buffer.push(t)},r.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},r.prototype.notifyComplete=function(t){var r=this.buffer;this.remove(t),this.active--,r.length>0?this._next(r.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},r}(s.OuterSubscriber);r.MergeAllSubscriber=u},function(t,r,e){"use strict";function n(t,r){return this.lift(new o(t,r))}var i=this&&this.__extends||function(t,r){function e(){this.constructor=t}for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n]);t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)},s=e(2);r.scan=n;var o=function(){function t(t,r){this.accumulator=t,this.seed=r}return t.prototype.call=function(t,r){return r._subscribe(new c(t,this.accumulator,this.seed))},t}(),c=function(t){function r(r,e,n){t.call(this,r),this.accumulator=e,this.index=0,this.accumulatorSet=!1,this.seed=n,this.accumulatorSet="undefined"!=typeof n}return i(r,t),Object.defineProperty(r.prototype,"seed",{get:function(){return this._seed},set:function(t){this.accumulatorSet=!0,this._seed=t},enumerable:!0,configurable:!0}),r.prototype._next=function(t){return this.accumulatorSet?this._tryNext(t):(this.seed=t,void this.destination.next(t))},r.prototype._tryNext=function(t){var r,e=this.index++;try{r=this.accumulator(this.seed,t,e)}catch(n){this.destination.error(n)}this.seed=r,this.destination.next(r)},r}(s.Subscriber)},function(t,r,e){"use strict";function n(){for(var t=[],r=0;r<arguments.length;r++)t[r-0]=arguments[r];var e=t[t.length-1];u.isScheduler(e)?t.pop():e=null;var n=t.length;return 1===n?c.concatStatic(new s.ScalarObservable(t[0],e),this):n>1?c.concatStatic(new i.ArrayObservable(t,e),this):c.concatStatic(new o.EmptyObservable(e),this)}var i=e(8),s=e(10),o=e(9),c=e(22),u=e(6);r.startWith=n},function(t,r,e){"use strict";var n=e(3),i=n.root.Symbol;if("function"==typeof i)i.iterator?r.$$iterator=i.iterator:"function"==typeof i["for"]&&(r.$$iterator=i["for"]("iterator"));else if(n.root.Set&&"function"==typeof(new n.root.Set)["@@iterator"])r.$$iterator="@@iterator";else if(n.root.Map)for(var s=Object.getOwnPropertyNames(n.root.Map.prototype),o=0;o<s.length;++o){var c=s[o];if("entries"!==c&&"size"!==c&&n.root.Map.prototype[c]===n.root.Map.prototype.entries){r.$$iterator=c;break}}else r.$$iterator="@@iterator"},function(t,r){"use strict";var e=this&&this.__extends||function(t,r){function e(){this.constructor=t}for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n]);t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)},n=function(t){function r(){t.call(this,"object unsubscribed"),this.name="ObjectUnsubscribedError"}return e(r,t),r}(Error);r.ObjectUnsubscribedError=n},function(t,r){"use strict";var e=this&&this.__extends||function(t,r){function e(){this.constructor=t}for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n]);t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)},n=function(t){function r(r){t.call(this),this.errors=r,this.name="UnsubscriptionError",this.message=r?r.length+" errors occurred during unsubscription:\n"+r.map(function(t,r){return r+1+") "+t.toString()}).join("\n"):""}return e(r,t),r}(Error);r.UnsubscriptionError=n},function(t,r){"use strict";function e(t){return null!=t&&"object"==typeof t}r.isObject=e},function(t,r){"use strict";function e(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}r.isPromise=e},function(t,r,e){"use strict";function n(t,r,e,n){var b=new h.InnerSubscriber(t,e,n);if(!b.isUnsubscribed){if(r instanceof c.Observable)return r._isScalar?(b.next(r.value),void b.complete()):r.subscribe(b);if(s.isArray(r)){for(var p=0,f=r.length;p<f&&!b.isUnsubscribed;p++)b.next(r[p]);b.isUnsubscribed||b.complete()}else{if(o.isPromise(r))return r.then(function(t){b.isUnsubscribed||(b.next(t),b.complete())},function(t){return b.error(t)}).then(null,function(t){i.root.setTimeout(function(){throw t})}),b;if("function"==typeof r[u.$$iterator]){for(var l=0,y=r;l<y.length;l++){var d=y[l];if(b.next(d),b.isUnsubscribed)break}b.isUnsubscribed||b.complete()}else if("function"==typeof r[a]){var v=r[a]();if("function"==typeof v.subscribe)return v.subscribe(new h.InnerSubscriber(t,e,n));b.error("invalid observable")}else b.error(new TypeError("unknown type returned"))}}}var i=e(3),s=e(12),o=e(30),c=e(1),u=e(26),h=e(14),a=e(7);r.subscribeToResult=n},function(t,r,e){"use strict";function n(t,r,e){if(t){if(t instanceof i.Subscriber)return t;if(t[s.$$rxSubscriber])return t[s.$$rxSubscriber]()}return t||r||e?new i.Subscriber(t,r,e):new i.Subscriber}var i=e(2),s=e(5);r.toSubscriber=n},function(t,r,e){"use strict";function n(){try{return s.apply(this,arguments)}catch(t){return o.errorObject.e=t,o.errorObject}}function i(t){return s=t,n}var s,o=e(11);r.tryCatch=i},function(t,r){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}}])});